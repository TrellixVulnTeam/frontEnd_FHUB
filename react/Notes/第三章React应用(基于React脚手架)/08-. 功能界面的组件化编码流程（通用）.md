# 组件化编码流程

## 1.基本流程

1. **`拆分组件`:** 拆分界面,抽取组件
   - 分析界面的不同功能，根据功能 拆分组件
   - 组件是用来**`实现局部功能效果的代码和资源的集合(html/css/js/image等等)`**，所以`每个页面应当是一个文件夹`，为了方便引入，**`里面的jsx文件命名为index.jsx，css文件命名为index.css`**。这样**`在App.jsx只需要引入到文件夹名即可`**，React会自动找到index.jsx，`在index.jsx里会引入css样式，这样React只需引入index.jsx，就可以间接引入其样式`
   - React找到index.jsx里的组件命名不能是index，这样每个子组件都会是index，**`子组件按照自己的功能或者结构命名`**。只不过文件名是index.jsx，里面的组件按照自己的命名
   - **`引入的是index.jsx暴露的组件，import后面的名称与文件名index.jsx无关`**
   - ![image-20220205114020008](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205114020008.png)
2.  **`实现静态组件`**: 使用组件实现静态页面效果
   - 拿到静态页面，`先把静态页面都放在根组件App.js里`，`静态样式都放在App.css里`。使得页面至少能够跑起来
   - 同时`注意修改className`
   - 然后`分析静态页面和样式属于哪一部分` ，进行初步的静态页面的拆分
3.  实现动态组件

- 3.1 动态显示初始化数据
  - 3.1.1 数据类型
  
  - 3.1.2 数据名称
  
  - 3.1.2 保存在哪个组件?
  
- 3.2 交互(从绑定事件监听开始)

## 2.Todolist 案例

### 2.1 拆分组件

拆法各自不同，但是如果拆分的组件难以命名，那么说明拆法有问题

![image-20220205114908087](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205114908087.png)

按理说，在App.js引入组件的方式应该是`import Add from './component/Add/Add.jsx'`。在`Add.jsx`里会写样式`impotr './Add.css'`样式，**`并暴露出写好的组件`**

![image-20220205121526122](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205121526122.png)

但因为路径太过麻烦，**`现在都改为将组件文件夹里的文件统一命名成index.css和index.jsx。在在App.js引入组件路径只到文件夹名，React会自动引入文件夹里的index.jsx暴露出的组件`**

![image-20220205121840951](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205121840951.png)

### 2.2实现静态组件

`划分好组件后，为每个组件写它的结构，样式和功能`。

我们这里假设已经有专门写静态页面的人员帮我们写好了静态页面

我们可以选择拿到静态页面后，将结构和样式写到对应的组件里去。但为了能及时看到效果，且保证不出错，我们可以`一开始将结构全部赋值到App.jsx里的根组件里，样式全部放到新建的App.css里`，先保证能看到整体的样式，然后再划分。

`体现了组件化编程`，`每个组件都有自己的结构样式和功能`，`index.html没有样式结构，只有一个容器`，我们将写好的这一大型功能组件渲染到容器里

静态页面如下图所示，我们需要实现的其实就是**`完成一个动态的container将其渲染到页面`**中。同时这个**`container又可以细分成更小的组件来编码`**

![image-20220205142654596](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205142654596.png)

App.jsx根组件其实就相当于外壳，外壳会有自己的样式，组件也有组件自己的样式。不断地拆分。

![image-20220205150519398](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205150519398.png)

### 2.3  实现动态组件

#### 2.3.1 动态显示初始化数据

初始化数据就是`已经做完的toDolist`

##### 1.数据类型

`toDoList明显是要动态改变的`，新增或删除，所以要放在**`state`**里。因为有`多个todos`，所以肯定是`一个数组`，`每一个元素就是一个todo对象，包含着id、name、done(是否完成)`

![image-20220205160241164](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205160241164.png)

##### 2.数据名称

![image-20220205160241164](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205160241164.png)

##### 3.存在哪个组件?

1. Item

   - 一开始自己想的是存在Item里，但这设计思路就矛盾了，我`在Item组件里进行循环遍历，每一个todo生成一个li。但我在List组件里又想引入多个Item，这样设计就矛盾了`
   - 我希望的是`Item就是一行li，我在List组件里调用多个Item组件`
   - **`在render函数里的return如果没有多级结构，只是一行jsx代码，不需要()`**

   ![image-20220205160650899](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205160650899.png)

2. List

   - 所以又想到把数据存在List的state里，`用map函数遍历this.state.todos数组，this.state.todos是一个对象数组，每个元素是一个对象。返回jsx数组，jsx数组中的每个元素都是一个Item组件，并且通过展开每一个元素对象的方式将参数放在标签的属性上传递给Item组件`

     

     ![image-20220205161326996](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205161326996.png)

     - `Item组件通过this.props`接收，然后修改自己的样式`一定要和展开对象的属性名称一致`

     ![image-20220205161448182](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205161448182.png)

3. App

   - 但又遇到问题了，因为`Add组件要修改todos`，往里面添加todo。如果todos写在了List组件的this.state里，`兄弟组件之间目前是没有办法进行通信的`，Add组件拿不到List组件的this.state，没办法 修改。
   - 出现了`两个组件要用同一个数据的情况`，Add组件要修改todos，List组件要读todos。所以我们要把todos，放在两个组件的父组件App的this.state里，这就是**`状态提升`**
   - `父组件向List组件通过传递标签属性的形式传递todos`，List通过this.props(**`props接收时，会将标签属性转换为对象`**)拿到todos，然后进行map遍历，调用多个Item组件(也通过传递标签属性的形式给Item组件传递参数)，生成样式。

![image-20220205161945074](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205161945074.png)

![image-20220205162108512](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205162108512.png)

![image-20220205162152121](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220205162152121.png)