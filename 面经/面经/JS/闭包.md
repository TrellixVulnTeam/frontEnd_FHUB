## 1.介绍JS闭包

闭包是指有权`访问另一个函数作用域中变量的函数。`创建闭包最常见的方式就是，`在一个函数内部创建另一个函数`。

闭包通常用来`创建内部变量`，使得 这些变量不`能被外部随意修改`，同时`又可以通过指定的接口来操作`。这样可以`避免全局变量的污染`，可以在内存中`维护一个变量`



## 2.**使用闭包应该注意什么**

内存泄漏，因为变量会被另外一个函数用到，所以会一直保留，消耗很大。`就算用不到，也不能够及时释放`

this指向，



## 3.JS闭包会造成泄漏，用哪些方法去应对，为什么会造成内存泄漏

**`不再用到的内存，没有及时释放，就叫做内存泄漏`**。如果这个函数保存的变量会被里面的函数使用，这不是内存泄漏。如果用不到了，解除引用就好了，将闭包或者变量置为null

因为存在着对该变量的引用，垃圾回收机制无法回收它



## 4.通过什么方法去使GC能回收闭包，

解除对变量的引用，将变量设置为null



## 5. 判断回收

垃圾收集器会`周期性`的找出那些`不再继续使用的变量`，然后`释放其内存`。`全局变量的生命周期`直至`浏览器卸载页面`才会结束，也就是说**`全局变量不会被当成垃圾回收`**。

而如何找出不再继续使用的变量，有两种策略：

## 5.1 标记清除

1. `垃圾收集器`会在运行的时候会给存储在`内存`中的**`所有变量都加上标记`**。
2. 然后`去掉当前环境中变量的标记`，和`环境引用的变量的标记`
3. 还存在标记的变量就是需要删除的变量
4. 最后垃圾收集器会`销毁这些带标记变量`，`回收所占用的内存空间`



### 5.2 引用计数策略

`跟踪记录每个变量被引用的次数`，如果引用次数为0，那么对象最后会被垃圾收集器回收。



## 6. 循环引用能不能被回收

比如在`一个函数中存在着循环引用`，标记清除是可以进行回收的，因为函数执行完毕后，`进入别的环境，循环引用的对象不存在那个环境中，会带着标记最后被清除`

但是如果是引用计数策略，两个循环引用的`变量引用次数永远不可能为0`，就没办法回收，只能手动回收。
