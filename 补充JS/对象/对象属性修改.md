# Object.defineProperty()

## 1.对象的定义与赋值

经常使用的定义与赋值方法`obj.prop =value`或者`obj['prop']=value`

![img](https://upload-images.jianshu.io/upload_images/5016475-4d7533fee7979ef4.png?imageMogr2/auto-orient/strip|imageView2/2/w/1004/format/webp)



## 2.Object.defineProperty()语法说明

`Object.defineProperty()`的作用就是直接`在一个对象上定义一个新属性`，或者`修改一个已经存在的属性`

```javascript
Object.defineProperty(obj, prop, desc)
```

1. `obj` 需要定义属性的当前`对象`
2. `prop` 当前需要定义的`属性名`
3. `desc` `属性描述符`，

一般通过为对象的属性赋值的情况下，对象的属性可以修改也可以删除，但是通过Object.defineProperty()定义属性，通过描述符的设置可以进行**`更精准的控制对象属性`**。



## 3. 属性的特性以及内部属性

javacript 有三种类型的属性

1. `命名数据`属性：拥有一个确定的值的属性。这也是最常见的属性
2. `命名访问器`属性：通过`getter`和`setter`进行读取和赋值的属性
3. `内部属性`：由JavaScript引擎内部使用的属性，不能通过JavaScript代码直接访问到，不过可以通过一些方法间接的读取和设置。比如，每个对象都有一个内部属性`[[Prototype]]`，你不能直接访问这个属性，但可以通过`Object.getPrototypeOf()`方法间接的读取到它的值。虽然内部属性通常用一个双吕括号包围的名称来表示，但实际上这并不是它们的名字，它们是一种抽象操作，是不可见的，根本没有上面两种属性有的那种字符串类型的属性



## 4. 属性描述符

通过Object.defineProperty()为对象定义属性，有`两种形式`，且**`不能混合使用`**，分别为**`数据描述符`**，**`存取描述符`**，下面分别描述下两者的区别：

属性不设置时的默认值

![img](https://upload-images.jianshu.io/upload_images/5016475-9cd41a36735b667d.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp)

### 4.1 数据描述符 --特有的两个属性（value,writable）

``` javascript
Object.defineProperty(obj, prop, {
    value: xx,
    writable: xx
})
```

用于要设置的属性，值是数据时

**`value`**:  要设定的`属性值`

**`writable`**：该`属性值是否可以被修改`，**`默认不可以`**

```javascript
let Person = {};
Object.defineProperty(Person, 'name', {
    value: 'jack'
})
Person.name = 'Rose';
console.log(Person.name);  
```

默认是不可以改变的，所以修改Person.name无效，输出jack



### 4.2 存取描述符 --是由一对 getter、setter 函数功能来描述的属性

`get`：一个给属性提供`getter`的方法，如果没有`getter`则为`undefined`。`该方法返回值被用作属性值`。默认为`undefined`。

`set`：一个给属性提供`setter`的方法，如果没有`setter`则为`undefined`。该方法将`接受唯一参数`，并将`该参数的新值分配给该属性`。默认值为`undefined`。

``` javascript
```

