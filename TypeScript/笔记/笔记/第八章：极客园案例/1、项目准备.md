>  H5 端项目演示：http://toutiao.itheima.net/
>
>  H5 端项目接口文档：http://toutiao.itheima.net/api.html
>
>  H5 项目仓库地址：https://gitee.com/zqran/geek-h5-89

## 1、项目介绍

- 项目功能和演示，包括
  - 短信登录、退出
  - 首页-频道管理，文章列表，更多操作
  - 文章详情-文章详情，文章评论，评论回复，点赞，收藏，关注
  - 个人中心-个人资料展示，个人资料编辑

- 技术栈：
  - 项目搭建：React 官方脚手架 `create-react-app`
  - react hooks
  - 状态管理：redux
  - UI 组件库：`antd-mobile` v5
  - ajax 请求库：`axios`
  - 路由：`react-router-dom` 以及 `history`
  - CSS 预编译器：`sass`
  - CSS Modules 避免组件之间的样式冲突
  - **TypeScript**
  - 工具库：lodash
  - hooks 库：ahooks
  - websocket 即时通讯

## 2、项目搭建 + 初始化

1. 使用 React CLI 搭建项目

   1. ``` bash
      npx create-react-app geek-h5 --template typescript
      ```

2. 进入项目根目录：`cd 项目名称`

3. 启动项目：`yarn start`

4. 调整项目目录结构，删除多余文件：

   1. ``` bash
      /src
        /assets         项目资源文件，比如，图片 等
        /components     通用组件
        /pages          页面路由，路由组件
        /store          Redux 状态仓库
        /types          TS 类型，包括：接口、redux等类型
        /utils          工具，比如，token、axios 的封装等
        App.scss        根组件样式文件
        App.tsx         根组件
        index.scss      全局样式
        index.tsx       项目入口文件
      ```

5. 在index.scss添加全局样式

   1. ``` css
      html,
      body {
        margin: 0;
        padding: 0;
      }
      
      html,
      body,
      #root {
        height: 100%;
      }
      
      p,
      h2,
      h3 {
        margin: 0;
      }
      ```

6. 在App.scss添加全局样式

   1. ``` css
      .app {
        height: 100%;
      }
      ```

## 3、安装 SASS

- 脚手架没有sass，但是有sass-loader

``` bash
yarn add sass
```

## 4、使用 git/gitee 管理项目

1. 在项目根目录打开终端，并初始化 git 仓库（如果已经有了 git 仓库，无需重复该步），命令：`git init`
2. 添加项目内容到暂存区：`git add .`
3. 提交项目内容到本地仓库区：`git commit -m 项目初始化`
4. 在github/gitee/gitlab网站上建立远程仓库
5. 添加 remote 仓库地址：`git remote add origin [gitee 仓库地址]`
6. 将项目内容推送到 gitee：`git push origin master -u`

- 以后只需要：`git push origin` 即可

## 5、配置基础路由

1. 安装路由：`yarn add react-router-dom@5.3.0` 
2. 安装第三方的路由的类型声明文件 `yarn add @types/react-router-dom -D`（-D表明是开发者模式）

## 6、默认展示首页内容

1. 首先简单写出首页和登录页面这两个组件（这两个是路由组件）

   1. 首页：pagess/Layout.tsx

      1. ``` typescript
         import React from 'react'
         
         export default function Layout() {
           return (
             <div>Layout</div>
           )
         }
         ```

   2. 登录：pages/Login.tsx

      1. ``` typescript
         import React from 'react'
         
         export default function Login() {
           return (
             <div>Login</div>
           )
         }
         ```

2. 将两个组件引入。并利用Redirect组件设置默认展示页面

   1. ==Redirect一定要放在最后==。因为匹配的原理是，浏览器网址一定要包含path中所有的单词符号，可以比path多，但一定不能比path少就可以匹配成功。因此首页是'/'，和前两个Route都匹配不上，所以重定向到'/home'。当浏览器网址是'/home'时，就可以与第一个Route匹配上，从而展示组件Layout。这里要用Switch组件包裹，这样有一个匹配成功后就会停止匹配，避免重复。

   2. ``` typescript
      import React from 'react';
      import './App.scss';
      // 引入路由组件
      import {Redirect, Route, Switch } from 'react-router-dom';
      import Login from './pages/Login'
      import Layout from './pages/Layout'
      
      function App() {
        return (
          <div className="app">
            <div>
              <Switch>
                <Route path='/home' component={Layout}></Route>
                <Route path='/login' component={Login}></Route>
                {/* 当所有路径都匹配不上时，切换路径，一般用于进入页面的默认显示 */}
                <Redirect to='/home'/>
                    
                {/* 这个Route一定要放在最后。如果将Redirect放在最前面，一开始进入页面，此时浏览器网址是'/'，因此匹配这个Route成功，重定向到‘/home'，此时浏览器网址是'/home'，包含了'/'，所以匹配再次成功，又会进入这个Route从而一直循环。
                <Route path="/" render={()=> <Redirect to="/home"></Redirect>}></Route>
                */}
              </Switch>
            </div>
      
          </div>
        );
      }
      
      export default App;
      ```

3. 补充

   1.  Route 组件的 `render` 属性，可以用来==渲染自定义内容==

      1. ``` typescript
         <Route exact path="/" render={() => <Redirect to="/home" />} />;
         ```

   2. Redirect组件可以实现路由重定向

## 7、antd-mobile 组件库

- antd-文档[Ant Design Mobile - Ant Design Mobile](https://mobile.ant.design/zh)
- **步骤**：
  1. 安装 antd 组件库：`yarn add antd-mobile@next`
  2. 导入 Button 组件
  3. 在 Login 页面渲染 Button 组件