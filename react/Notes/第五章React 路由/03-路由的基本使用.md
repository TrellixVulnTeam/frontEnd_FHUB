## 1.案例

1. 明确好界面的导航区、展示区

2. 导航区的a标签改为Link标签，点击就会改变浏览器路径

   ``` html
   <Link to="/xxx">Demo</Link>
   ```

3. 展示区写Route标签进行路径匹配

   ``` html
   <Route path="/xxx" component={Demo} />
   ```

   

4. <App>渲染时外侧包裹了一个<BrowserRouter>或者<HashRouter>

   

## 2.路由组件和一般组件的不同

### 2.1 写法不同

- 一般组件：<Demo />
- 路由组件:<Route path="/xxx" component={Demo} />

<img src="C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310145310218.png" alt="image-20220310145310218" style="zoom:67%;" />

![image-20220310145320631](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310145320631.png)

### 2.2 存放位置不同

- 一般组件：components
- 路由组件：pages



### 2.3 `接收到的props不同`

- 一般组件：写组件标签时传递了什么，就能收到什么

- 路由组件：接收到三个固定的属性

  - history:

    ``` javascript
    history:
        go: ƒ go(n)
        goBack: ƒ goBack()
        goForward: ƒ goForward()
        push: ƒ push(path, state)
        replace: ƒ replace(path, state)
    ```

    

  - location

    ``` javascript
    location:
        pathname: "/about"
        search: ""
        state: undefined
    ```

    

  - match

    ``` javascript
    match:
        params: {}
        path: "/about"
        url: "/about"	
    ```

    ![image-20220310150104088](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310150104088.png)



## 3. 封装NavLink

![image-20220310153924757](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310153924757.png)

每一个导航栏的组件都有一个activeClassName和className的属性，属性值也是一样的，不同的地方是to属性值。如果导航栏选择多了，那么代码就会臃肿，所以我们考虑自己封装一个NavLink。

1. 在App.js使用MyNavLink组件，并`将唯一不同的to值，通过属性to传递`

   ![image-20220310154147964](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310154147964.png)

2. 在写MyNavLink组件时，其实是`对NavLink进行的二次封装，减少不必要的重复`。所以调用通过this.props接收到传递过来的to属性值，因为传递过来的属性可能有多个，我们直接在NavLink属性处进行解构。

   ![image-20220310155235801](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310155235801.png)

   

3. 同时因为`标签体的内容也会通过props传递，属性为children`。所以我们在MyNavLink组件里直接对this.props进行解构时，会有一个属性children。而对于React里的标签来说，设置了children属性，React会帮忙渲染。其实是这里如果理解起来不方便的话，直接在to后，设置一个title属性值为About或者Home，也未尝不可以

   ![image-20220310154228260](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310154228260.png)

![image-20220310154811823](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310154811823.png)

注意：`在自己写的组件标签间写内容是无效的，是不会显示的，只会传递给Header组件的props属性里`

![image-20220310155335774](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310155335774.png)



## 4. 解决多级路径刷新页面样式丢失的问题

前提：

​	我们在引入bootStrap.css时的html代码如下，./表示当前路径

``` html
<link rel="stylesheet" href="./css/bootstrap.css">
```

​	多级路径代码如下：

``` html
<MyNavLink to='/atiguigu/about'>About</MyNavLink>
<MyNavLink to='/atiguigu/home'>Home</MyNavLink>

<switch>
    <Route path="/atiguigu/about" component={About} />
    <Route path="/atiguigu/home" component={Home} />
</switch>
```

过程：

1. ​	一开始开启服务器，进入浏览器页面，此时浏览器地址为(http://localhost:3000/)，向本地服务器发送了请求，但没有请求任何内容，本地服务器直接返回index.html作为响应，而此时请求bootStrap.css路径为(http://localhost:3000/css/bootStrap.css)等价于请求本地服务器的(`public/css/bootStrap.css`)所以可以找到，渲染不会出现问题
2. ​	当点击<NavLink>时，虽然浏览器路径改变了(http://localhost:3000/atiguigu/about)，但并没有向本地服务器发送请求，只是React在切换不同的组件。
3. ​	而当刷新页面时，浏览器向本地服务器重新发送请求，此时浏览器地址为(http://localhost:3000/atiguigu/about)，因此请求bootStrap.css的路径为(http://localhost:3000/atiguigu/about/css/bootStrap.css)等价于请求本地服务器的(`public/atiguigu/about/css/bootStrap.css`)。显然找不到bootStrap.css



解决方法：

1. ​	public/index.html 中**`引入样式时不写 ./ 写 /`**。表示根目录，无论浏览器从什么时候，什么地址发送请求，请求bootStrap.css的路径一直都是(`public/css/bootStrap.css`)。

   ``` html
   <link rel="stylesheet" href="/css/bootstrap.css">
   ```

   

2. ​	public/index.html 中**`引入样式时不写 ./ 写 %PUBLIC_URL%`**。表示根目录，无论浏览器从什么时候，什么地址发送请求，请求bootStrap.css的路径一直都是(`public/css/bootStrap.css`)。

   ``` html
   <link rel="stylesheet" href="%PUBLIC_URL%/css/bootstrap.css">
   ```

   ​	

3. ​	使用HashRouter



## 5. 路由的严格匹配与模糊匹配

1. 默认使用的是`模糊匹配`

   ​	---<Navlink to={toPath}></NavLink>

   ​	---<Route path={matchPath}/>

   ​	---**`toPath必须包含matchPath的所有内容，且必须按顺序`**。`toPath可以包含比matchPath多的路径，但一定要先按顺序从头匹配成功所有的matchPath里有的路径`

2. 可以开启严格匹配

   ``` html
   <Route exact={true} path="/about" component={About}/>
   ```

   

3. 严格匹配不要随意开启，需要再开。有些时候开启会导致无法继续匹配二级路由



示例：

​	有效

<img src="C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310173731650.png" alt="image-20220310173731650" style="zoom:67%;" />

​	

​	无效

![image-20220310173808942](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310173808942.png)

​	有效

​	

![image-20220310173834859](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310173834859.png)

​	无效

![image-20220310173952602](C:\Users\zayn\AppData\Roaming\Typora\typora-user-images\image-20220310173952602.png)