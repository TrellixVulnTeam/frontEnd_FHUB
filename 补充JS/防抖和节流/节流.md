## 1.为什么需要节流

在飞机大战的游戏中，我们按下空格会发射一个子弹：

- 很多飞机大战的游戏中会有这样的设定，`即使按下的频率非常快，子弹也会保持一定的频率来发射`；（其实很多的街机游戏都是这样的，普通攻击有一个最高的频率）；
- 比如`1秒钟只能发射一次，即使用户在这1秒钟按下了10次，子弹会保持发射一颗的频率来发射`；
- 但是事件是触发了10次的，响应的函数只触发了一次；

这就是**`节流`**的操作：

- `在某个时间内（比如500ms），某个函数只能被触发一次`；

节流的应用场景：

- 监听页面的滚动事件；
- 鼠标移动事件；
- 用户`频繁点击按钮`操作；
- 游戏中的一些设计；

总之，**`依然是密集的事件触发，但是这次密集事件触发的过程，不会等待最后一次才进行函数调用，而是会按照一定的频率进行调用`**；



## 2.定义

函数节流：**`不管事件触发频率有多高，只在单位时间内执行一次`**。

有两种思路实现：使用时间戳和定时器

``` javascript
function throttle(fn, delay) {
    let timer = null;
    return function (...args) {
        // 没有定时器，才开启。有定时器，要等上一个事件处理完毕，才能触发
        if (timer == null) {
            timer = setTimeout(() => {
                fn.apply(this, args);
                // 该定时器执行完毕后，清除
                timer = null;
            }, delay)
        }
    }
}
```

